<!DOCTYPE html>
<html lang="zh">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>购物车</title>
	<script src="js/vue.js"></script>
	<link rel="stylesheet" href="css/shop.css" type="text/css"/>
	<style>
		[v-cloak]{
			display:none;
		}
		
	</style>
</head>
<body>
	<div id="box">
		<table border=1>
			<thead>
				<th></th>
				<th>商品名称</th>
				<th>商品单价</th>
				<th>商品数量</th>
				<th>操作</th>
			</thead>
			<tbody>
				<tr v-for="(item,index) in arr">
					<td>{{index+1}}</td>
					<td>{{item.name}}</td>
					<td>{{item.price}}</td>
					<td><button type="button" class="count" @click="cut(item,index)">-</button> {{item.count}} <button type="button" class="count" @click="add(item,index)">+</button></td>
					<td><button type="button" @click="del(index)">移除</button></td>
				</tr>
			</tbody>
			<tfoot>
				<tr>
					<td colspan="5">总价：￥{{sum()}}</td>
				</tr>
			</tfoot>
		</table>
	</div>
</body>
	<script>
		let vm=new Vue({
			
			el:"#box",
			data:{
				arr:[
					{name:"iPhone X",price:7999,count:1},
					{name:"荣耀 10",price:2399,count:1},
					{name:"华为 P20",price:3399,count:1},
					{name:"小米 8",price:3999,count:1},
				]
			},
			methods:{
				add(item,index){
					this.arr[index].count=++item.count;
				},
				cut(item,index){
					if(!(this.arr[index].count==1)){
						this.arr[index].count=--item.count;
					}
				},
				sum(){
					let sum=0;
					this.arr.forEach(item=>{
						sum+=item.price*item.count;
					})
					return sum;
				},
				del(index){
					this.arr.splice(index,1);
				}
			}
		})
	</script>
</html>
